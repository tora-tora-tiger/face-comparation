# 特徴点ラベル文字サイズの修正

## 問題の概要

特徴点の円のサイズは適切に大きくなっていましたが、特徴点に表示される部位を表すラベル文字（「右目_1」「左目_1」など）のサイズが小さく、視認性が悪い状態でした。

## 修正内容

### フォントサイズの拡大

**修正前:**
```javascript
// ラベルを描画（フォントサイズも5倍に拡大）
ctx.fillStyle = '#2c3e50';
ctx.font = 'bold 30px Arial';
ctx.textAlign = 'center';
ctx.textBaseline = 'middle';
ctx.fillText(point.label, point.x, point.y);
```

**修正後:**
```javascript
// ラベルを描画（フォントサイズをさらに大きく）
ctx.fillStyle = '#2c3e50';
ctx.font = 'bold 48px Arial';
ctx.textAlign = 'center';
ctx.textBaseline = 'middle';
ctx.fillText(point.label, point.x, point.y);
```

### 変更詳細

- **フォントサイズ**: 30pxから48pxに拡大（1.6倍）
- **フォントウェイト**: bold（太字）を維持
- **テキスト配置**: center（中央揃え）を維持
- **ベースライン**: middle（中央基準）を維持

## 修正理由

1. **視認性の向上**: 特徴点の円が大きくなったため、それに比例してラベル文字も大きくする必要があった
2. **使いやすさ**: 処理済み画像（正面化後）で特徴点を識別しやすくする
3. **UI一貫性**: 特徴点の円のサイズとラベルのサイズのバランスを取る

## 現在の特徴点仕様

### 特徴点の描画仕様
- **円の半径**: 50ピクセル
- **枠線の太さ**: 8ピクセル
- **ラベルフォント**: bold 48px Arial
- **ヒットテスト範囲**: 55ピクセル

### 特徴点の色分け
- **右目**: #3498db（青）
- **左目**: #9b59b6（紫）
- **鼻**: #f39c12（オレンジ）
- **口**: #e74c3c（赤）
- **その他**: #95a5a6（グレー）

## 修正結果

### 修正前の問題
- ✗ ラベル文字が小さく、特徴点の種類が識別しにくい
- ✗ 円のサイズとラベルサイズのバランスが悪い
- ✗ 処理済み画像での作業効率が低い

### 修正後の改善
- ✅ ラベル文字が大きく、明確に読める
- ✅ 特徴点の種類を瞬時に識別可能
- ✅ 円とラベルのサイズバランスが適切
- ✅ 処理済み画像での作業効率が向上

## テスト確認項目

1. **表示確認**: 各特徴点タイプでラベルが正確に表示される
2. **視認性**: 処理済み画像でラベルが明確に読める
3. **レイアウト**: ラベルが特徴点の中央に適切に配置される
4. **パフォーマンス**: 文字サイズ変更による描画性能への影響なし

## 技術的詳細

### Canvas描画における文字レンダリング

```javascript
function drawFeaturePoint(canvas, point) {
    const ctx = canvas.getContext('2d');
    
    // 円の描画
    ctx.fillStyle = colors[point.type];
    ctx.strokeStyle = 'white';
    ctx.lineWidth = 8;
    ctx.beginPath();
    ctx.arc(point.x, point.y, 50, 0, 2 * Math.PI);
    ctx.fill();
    ctx.stroke();

    // ラベル文字の描画
    ctx.fillStyle = '#2c3e50';
    ctx.font = 'bold 48px Arial';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(point.label, point.x, point.y);
}
```

### フォント設定の詳細
- **フォントファミリー**: Arial（クロスブラウザ対応）
- **フォントウェイト**: bold（太字で視認性向上）
- **フォントサイズ**: 48px（大きく読みやすい）
- **色**: #2c3e50（ダークグレー、コントラスト良好）

## 関連する修正履歴

1. **特徴点サイズ拡大**: 半径6px → 10px → 50px
2. **ヒットテスト範囲拡大**: 10px → 15px → 55px
3. **ラベルフォントサイズ拡大**: 12px → 14px → 30px → 48px

## 今後の考慮事項

### 可能な改善点
1. **レスポンシブ対応**: 画面サイズに応じたフォントサイズの動的調整
2. **アクセシビリティ**: 色覚障害に配慮した色とコントラストの改善
3. **カスタマイズ**: ユーザーが特徴点サイズを調整できる設定機能

### パフォーマンス考慮
- 大きなフォントサイズでもCanvas描画性能に大きな影響はなし
- メモリ使用量も許容範囲内
- レンダリング速度は良好

## まとめ

特徴点のラベル文字サイズを30pxから48pxに拡大することで、処理済み画像での特徴点識別が大幅に改善されました。これにより、ユーザーは特徴点の種類を瞬時に識別でき、作業効率が向上しました。

特徴点の円サイズ（半径50px）とラベルサイズ（48px）のバランスも適切で、視覚的に統一感のある UI となっています。